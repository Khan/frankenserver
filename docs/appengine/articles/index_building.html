
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


















 
 
 
 
 
  
  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/appengine/articles/index_building.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<title>How Index Building Works - Google App Engine - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/appengine/docs/_toc.ezt';
var codesite_token = null;
var logged_in_user_email = null;
//--></script>
<link href="../../css/codesite.pack.04102009.css" type="text/css" rel="stylesheet">
<script src="../../js/codesite_head.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript">CODESITE_CSITimer['load'].tick('bhs');</script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml">

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../css/iehacks.css"><![endif]-->

    <link href="../../css/semantic_headers.css" rel="stylesheet" type="text/css" />
    <link href="../css/local_extensions.css" rel="stylesheet" type="text/css" />
    <script src="../js/customtabs.js" type="text/javascript"></script>
    <script src="../js/ui.tabs.js" type="text/javascript"></script>
  </head>

  <body class="gc-documentation">

    
    
    <script type="text/javascript">
var _gaq = _gaq || [];

var cookiePath = '/appengine/';
if (cookiePath.lastIndexOf('.html') > cookiePath.lastIndexOf('/')) {
  cookiePath = cookiePath.substring(0, cookiePath.lastIndexOf('/') + 1);
};

_gaq.push(


    ['siteTracker._setAccount', 'UA-18071-1'],
    ['siteTracker._setDomainName', 'code.google.com'],
    ['siteTracker._trackPageview']
);
(function() {
  var ga = document.createElement('script');
  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  (document.getElementsByTagName('head')[0] ||
   document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
</script>


<div id="gb">
 <span>
  
    <a id="lang-dropdown" href="http://code.google.com" onclick="return false;"><span style="text-decoration:underline">English</span> <span style="font-size:.75em;">&#9660;</span></a>
  
 </span>
</div>

<div class="gbh" style="left:0px;"></div>
<div class="gbh" style="right:0px;"></div>


<div id="gc-container">
<a id="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent-anchor">Skip to page content</a>
  <a href="#gc-toc-anchor">Skip to main navigation</a>
</div>

<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
     <img src="../../images/code_logo.gif" height="40" width="167" alt="Google Code" style="border:0;margin:3px 0 0 0;">
  
  </a></div>
  <div id="search">
    <div id="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml">
      </noscript>
      <div id="gsc-search-box">
        <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px">
        <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
        <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit">
        <div class="greytext">e.g. "templates" or "datastore"</div>
      </div>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->




</div> <!-- end gc-header -->


<div id="codesiteContent">

<a id="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1 style="padding:0 0 0 6px;">Google App Engine</h1>
  <ul id="articles" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="../index.html" title="Google App Engine home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="../docs/index.html" title="Official Google App Engine documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../kb/index.html" title="Answers to frequently asked questions about Google App Engine">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="index.html" class="selected" title="Focused articles and tutorials for Google App Engine developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googleappengine.blogspot.com/" title="Official Google App Engine blog">Blog</a>
    </li>
  
    <li>
      <a href="../community.html" title="Community home for Google App Engine">Community</a>
    </li>
  
    <li>
      <a href="../terms.html" title="Google App Engine terms of service">Terms</a>
    </li>
  
    <li>
      <a href="../downloads.html" title="Download Google App Engine">Download</a>
    </li>
  

  
  
  
  
  <li><g:plusone size="small" count="false" source="google:googlecode"></g:plusone>&nbsp;</li>
</ul>
</div> <!-- end gc-topnav -->


    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>  
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../downloads.html">Downloads</a></li>
  <li><a href="../tools_tips.html">Tools and Tips</a></li>
  <li><a href="../docs/glossary.html">Glossary</a><sup class="new">New!</sup></li>
  <li><a href="https://appengine.google.com/">Admin Console</a></li>
  <li><a href="http://code.google.com/status/appengine">System Status</a></li>
  <li><a href="http://code.google.com/p/googleappengine/issues/list">Issue Tracker</a></li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Getting Started</h2>
    <ul>
      <li><a href="../docs/whatisgoogleappengine.html">What Is Google App Engine?</a></li>
      <li><a href="../docs/java/gettingstarted/index.html">Java</a>
        <ul>
              <li><a href="../docs/java/gettingstarted/introduction.html">Introduction</a></li>
    <li><a href="../docs/java/gettingstarted/installing.html">Installing the Java SDK</a></li>
    <li><a href="../docs/java/gettingstarted/creating.html">Creating a Project</a></li>
    <li><a href="../docs/java/gettingstarted/usingusers.html">Using the Users Service</a></li>
    <li><a href="../docs/java/gettingstarted/usingjsps.html">Using JSPs</a></li>
    <li><a href="../docs/java/gettingstarted/usingdatastore.html">Using the Datastore</a></li>
    <li><a href="../docs/java/gettingstarted/staticfiles.html">Using Static Files</a></li>
    <li><a href="../docs/java/gettingstarted/uploading.html">Uploading Your Application</a></li>
    <li><a href="http://googcloudlabs.appspot.com">Codelabs for Getting Started in Java</a></li>

        </ul>
      </li>
      <li><a href="../docs/python/gettingstarted/index.html">Python 2.5</a>
        <ul>
            <li><a href="../docs/python/gettingstarted/introduction.html">Introduction</a></li>
  <li><a href="../docs/python/gettingstarted/devenvironment.html">The Development Environment</a></li>
  <li><a href="../docs/python/gettingstarted/helloworld.html">Hello, World!</a></li>
  <li><a href="../docs/python/gettingstarted/usingwebapp.html">Using the webapp Framework</a></li>
  <li><a href="../docs/python/gettingstarted/usingusers.html">Using the Users Service</a></li>
  <li><a href="../docs/python/gettingstarted/handlingforms.html">Handling Forms With webapp</a></li>
  <li><a href="../docs/python/gettingstarted/usingdatastore.html">Using the Datastore</a></li>
  <li><a href="../docs/python/gettingstarted/templates.html">Using Templates</a></li>
  <li><a href="../docs/python/gettingstarted/staticfiles.html">Using Static Files</a></li>
  <li><a href="../docs/python/gettingstarted/uploading.html">Uploading Your Application</a></li>

        </ul>
      </li>
      <li><a href="../docs/python/gettingstartedpython27/index.html">Python 2.7</a>
        <ul>
            <li><a href="../docs/python/gettingstartedpython27/introduction.html">Introduction</a></li>
  <li><a href="../docs/python/gettingstartedpython27/devenvironment.html">The Development Environment</a></li>
  <li><a href="../docs/python/gettingstartedpython27/helloworld.html">Hello, World!</a></li>
  <li><a href="../docs/python/gettingstartedpython27/usingwebapp.html">Explaining the webapp2 Framework</a></li>
  <li><a href="../docs/python/gettingstartedpython27/usingusers.html">Using the Users Service</a></li>
  <li><a href="../docs/python/gettingstartedpython27/handlingforms.html">Handling Forms With webapp</a></li>
  <li><a href="../docs/python/gettingstartedpython27/usingdatastore.html">Using the Datastore</a></li>
  <li><a href="../docs/python/gettingstartedpython27/templates.html">Using Templates</a></li>
  <li><a href="../docs/python/gettingstartedpython27/staticfiles.html">Using Static Files</a></li>
  <li><a href="../docs/python/gettingstartedpython27/uploading.html">Uploading Your Application</a></li>

        </ul>
      </li>
      <li><a href="../docs/go/gettingstarted/index.html">Go</a>
        <ul>
          <li><span class="exp-feat">Experimental!</span></li>
            <li><a href="../docs/go/gettingstarted/introduction.html">Introduction</a></li>
  <li><a href="../docs/go/gettingstarted/devenvironment.html">The Development Environment</a></li>
  <li><a href="../docs/go/gettingstarted/helloworld.html">Hello, World!</a></li>
  <li><a href="../docs/go/gettingstarted/usingusers.html">Using the Users Service</a></li>
  <li><a href="../docs/go/gettingstarted/handlingforms.html">Handling Forms</a></li>
  <li><a href="../docs/go/gettingstarted/usingdatastore.html">Using the Datastore</a></li>
  <li><a href="../docs/go/gettingstarted/uploading.html">Uploading Your Application</a></li>

        </ul>
      </li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Java</h2>
    <ul>
          <li><a href="../docs/java/overview.html">Overview</a></li>
    <li><a href="../docs/java/runtime.html">Servlet Environment</a></li>
    <li><a href="../docs/java/backends/index.html">Backends</a>
      <ul>
        <li><a href="../docs/java/backends/overview.html">Overview</a></li>
<li><a href="../docs/java/javadoc/com/google/appengine/api/backends/package-summary.html">Javadoc Reference</a></li>


      </ul>
    </li>
    <li><a href="../docs/java/datastore/index.html">Storing Data</a>
      <ul>
            <li><a href="../docs/java/datastore/overview.html">Overview</a></li>
    <li><a href="../docs/java/datastore/entities.html">Entities</a></li>
    <li><a href="../docs/java/datastore/queries.html">Queries</a></li>
    <li><a href="../docs/java/datastore/transactions.html">Transactions</a></li>
    <li><a href="../docs/java/datastore/hr/index.html">Choosing a Datastore</a></li>
    <li><a href="../docs/java/datastore/hr/overview.html">Using the High Replication Datastore</a></li>
    <li><a href="../docs/java/datastore/metadataqueries.html">Metadata Queries</a></li>
    <li><a href="../docs/java/datastore/stats.html">Statistics</a></li>
    <li><a href="../docs/java/datastore/async.html">Async API</a></li>
    <li><a href="../docs/java/datastore/callbacks.html">Callbacks</a></li>
    <li><a href="../docs/java/datastore/jdo/index.html">JDO</a>
      <ul>
            <li><a href="../docs/java/datastore/jdo/overview.html">Overview</a></li>
    <li><a href="../docs/java/datastore/jdo/dataclasses.html">Defining Data Classes with JDO</a></li>
    <li><a href="../docs/java/datastore/jdo/creatinggettinganddeletingdata.html">Creating, Getting, and Deleting Data in JDO</a></li>
    <li><a href="../docs/java/datastore/jdo/relationships.html">Entity Relationships in JDO</a></li>
    <li><a href="../docs/java/datastore/jdo/queries.html">Queries in JDO</a></li>

      </ul>
    </li>
    <li><a href="../docs/java/datastore/jpa/index.html">JPA</a>
      <ul>
            <li><a href="../docs/java/datastore/jpa/overview.html">Overview</a></li>

      </ul>
    </li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/datastore/package-summary.html">Javadoc Reference</a></li>

      </ul>
    </li>
    <li><a href="../docs/java/apis.html">Services</a>
      <ul>
        <li><a href="../docs/java/appidentity/index.html">App Identity</a>
          <ul>
            <li><a href="../docs/java/appidentity/overview.html">Overview</a></li>

<li><a href="../docs/java/javadoc/com/google/appengine/api/appidentity/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/blobstore/index.html">Blobstore</a>
          <ul>
            <li><a href="../docs/java/blobstore/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/blobstore/package-summary.html">API Reference</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../docs/java/googlestorage/index.html">Google Cloud Storage</a>
          <ul>
            <li><a href="../docs/java/googlestorage/overview.html">Overview</a></li>
<li><a href="../docs/java/javadoc/com/google/appengine/api/files/package-summary.html">API Reference</a></li>
    </li>


          </ul>
        </li>
        <li><a href="../docs/java/capabilities/index.html">Capabilities</a>
          <ul>
            <li><a href="../docs/java/capabilities/overview.html">Overview</a></li>
<li><a href="../docs/java/javadoc/com/google/appengine/api/capabilities/package-summary.html">Javadoc Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/conversion/index.html">Conversion</a>
          <ul>
            <li><a href="../docs/java/conversion/overview.html">Overview</a></li>
<li><a href="../docs/java/javadoc/com/google/appengine/api/conversion/package-summary.html">Javadoc Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/channel/index.html">Channel</a>
          <ul>
            <li><a href="../docs/java/channel/overview.html">Overview</a></li>
<li><a href="../docs/java/javadoc/com/google/appengine/api/channel/package-summary.html">Javadoc Reference</a></li>
<li><a href="../docs/java/channel/javascript.html">JavaScript Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/images/index.html">Images</a>
          <ul>
                <li><a href="../docs/java/images/overview.html">Overview</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/images/package-summary.html">API Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/mail/index.html">Mail</a>
          <ul>
                <li><a href="../docs/java/mail/overview.html">Overview</a></li>
    <li><a href="../docs/java/mail/usingjavamail.html">Using JavaMail to Send Mail</a></li>
    <li><a href="../docs/java/mail/receiving.html">Receiving Mail</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/mail/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/memcache/index.html">Memcache</a>
          <ul>
                <li><a href="../docs/java/memcache/overview.html">Overview</a></li>
    <li><a href="../docs/java/memcache/usingjcache.html">Using JCache</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/memcache/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/multitenancy/index.html">Multitenancy</a>
          <ul>
                  <li><a href="../docs/java/multitenancy/overview.html">Overview</a></li>
    <li><a href="../docs/java/multitenancy/multitenancy.html">Multitenancy with Namespaces</a></li>
    <li><a href="../docs/java/multitenancy/namespaces.html">Other Uses for Namespaces</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/NamespaceManager.html">API Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/oauth/index.html">OAuth</a>
          <ul>
                <li><a href="../docs/java/oauth/overview.html">Overview</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/oauth/package-summary.html">API Reference</a></li>


          </ul>
        </li>
        <li><a href="../docs/java/prospectivesearch/index.html">Prospective Search</a>
          <ul>
            <li><a href="../docs/java/prospectivesearch/overview.html">Overview</a></li>
<li><a href="../docs/java/javadoc/com/google/appengine/api/prospectivesearch/package-summary.html">Javadoc Reference</a></li>

          </ul>
        </li>
        </li>
        <li><a href="../docs/java/taskqueue/index.html">Task Queues</a>
          <ul>
                 <li><a href="../docs/java/taskqueue/overview.html">Overview</a></li>
     <li><a href="../docs/java/taskqueue/overview-push.html">Using Push Queues</a></li>
     <li><a href="../docs/java/taskqueue/overview-pull.html">Using Pull Queues</a><sup class="new">New!</sup></li>
     <li><a href="../docs/java/javadoc/com/google/appengine/api/taskqueue/package-summary.html">Javadoc Reference</a></li>
     <li><a href="../docs/java/taskqueue/rest.html">REST reference</a> <span class="exp-feat">(Experimental)</span></li>
          </ul>
        </li>
        <li><a href="../docs/java/urlfetch/index.html">URL Fetch</a>
          <ul>
                <li><a href="../docs/java/urlfetch/overview.html">Overview</a></li>
    <li><a href="../docs/java/urlfetch/usingjavanet.html">Using java.net</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/urlfetch/package-summary.html">Low-level API</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/users/index.html">Users</a>
          <ul>
                <li><a href="../docs/java/users/overview.html">Overview</a></li>
    <li><a href="../docs/java/javadoc/com/google/appengine/api/users/package-summary.html">API Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/java/xmpp/index.html">XMPP</a>
          <ul>
                 <li><a href="../docs/java/xmpp/overview.html">Overview</a></li>
     <li><a href="../docs/java/javadoc/com/google/appengine/api/xmpp/package-summary.html">API Reference</a></li>

          </ul>
        </li>
      </ul>
    </li>
    <li><a href="../docs/java/javadoc/index.html">Services Javadoc</a></li>
    <li><a href="../docs/java/jrewhitelist.html">JRE Class White List</a></li>
    <li><a href="../docs/java/config/index.html">Configuration</a>
      <ul>
            <li><a href="../docs/java/config/webxml.html">Deployment Descriptor</a></li>
    <li><a href="../docs/java/config/appconfig.html">App Config</a></li>
    <li><a href="../docs/java/config/backends.html">Backends Config</a></li>
    <li><a href="../docs/java/config/indexconfig.html">Index Config</a></li>
    <li><a href="../docs/java/config/cron.html">Scheduled Tasks</a></li>
    <li><a href="../docs/java/config/queue.html">Task Queue Config</a></li>
    <li><a href="../docs/java/config/dos.html">DoS Protection Config</a></li>

      </ul>
    </li>
    <li><a href="../docs/java/configyaml/index.html">YAML Configuration</a>
      <ul>
                <li><a href="../docs/java/configyaml/appconfig_yaml.html">YAML App Config</a></li>
        <li><a href="../docs/java/configyaml/backends.html">Backends Config</a></li>
        <li><a href="../docs/java/configyaml/indexconfig.html">Index Config</a></li>
        <li><a href="../docs/java/configyaml/cron.html">Scheduled Tasks</a></li>
        <li><a href="../docs/java/configyaml/queue.html">Task Queue Config</a></li>
        <li><a href="../docs/java/configyaml/dos.html">DoS Protection Config</a></li>

      </ul>
    </li>
    <li><a href="../docs/java/tools/index.html">Tools</a>
      <ul>
            <li><a href="../docs/java/tools/devserver.html">Development Server</a></li>
    <li><a href="../docs/java/tools/uploadinganapp.html">Uploading and Managing an App</a></li>
    <li><a href="../docs/java/tools/eclipse.html">Google Plugin for Eclipse</a></li>
    <li><a href="../docs/java/tools/ant.html">Using Apache Ant</a></li>
    <li><a href="../docs/java/tools/capabilities.html">Capabilities Service Test Configuration</a>
    <li><a href="../docs/java/tools/localunittesting.html">Local Unit Testing</a>
        <ul>
            <li><a href="../docs/java/tools/localunittesting/javadoc/index.html">Testing Javadoc</a></li>
        </ul>
    </li>
    <li><a href="../docs/java/tools/appstats.html">Appstats</a></li>
    <li><a href="../docs/java/tools/remoteapi.html">Remote API</a></li>

      </ul>
    </li>
    <li><a href="../docs/java/howto/index.html">How-To</a>
      <ul>
              <li><a href="../docs/java/howto/maintenance.html">Handling Scheduled Maintenance Periods</a></li>

      </ul>
    </li>

    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Python</h2>
    <ul>
          <li><a href="../docs/python/overview.html">Overview</a></li>
    <li><a href="../docs/python/runtime.html">Runtime Environment</a></li>
    <li><a href="../docs/python/python27/index.html">Python 2.7</a>
      <ul>
            <li><a href="../docs/python/python27/newin27.html">What's New in Python 2.7</a></li>
    <li><a href="../docs/python/python27/using27.html">Using Python 2.7</a></li>

      </ul>
    </li>
    <li><a href="../docs/python/backends/index.html">Backends</a>
      <ul>
        <li><a href="../docs/python/backends/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/backends/functions.html">Backends API Functions</a></li>
    <li><a href="../docs/python/backends/exceptions.html">Backends API Exceptions</a></li>
    <li><a href="../docs/python/backends/logserviceapi.html">LogService API</a></li>
    <li><a href="../docs/python/backends/applog.html">AppLog Class</a></li>
    <li><a href="../docs/python/backends/requestlog.html">RequestLog Class</a></li>
    <li><a href="../docs/python/backends/runtimeapi.html">Runtime API</a></li>
  </ul>
</li>

      </ul>
    </li>
    <li><a href="../docs/python/datastore/index.html">Storing Data</a>
      <ul>
              <li><a href="../docs/python/datastore/overview.html">Datastore Overview</a></li>
      <li><a href="../docs/python/datastore/entities.html">Entities</a></li>
      <li><a href="../docs/python/datastore/queries.html">Queries</a></li>
      <li><a href="../docs/python/datastore/transactions.html">Transactions</a></li>
      <li><a href="../docs/python/datastore/datamodeling.html">Data Modeling</a></li>
      <li><a href="../docs/python/datastore/gqlreference.html">GQL Reference</a></li>
      <li><a href="../docs/python/datastore/hr/index.html">Choosing a Datastore</a></li>
      <li><a href="../docs/python/datastore/hr/overview.html">Using the High Replication Datastore</a></li>
      <li><a href="../docs/python/datastore/metadataqueries.html">Metadata Queries</a></li>
      <li><a href="../docs/python/datastore/stats.html">Statistics</a></li>
      <li><a href="../docs/python/datastore/async.html">Async API</a></li>
      <li><span class="tlw-title tlw-expanded">Reference</span>
        <ul>
          <li><a href="../docs/python/datastore/typesandpropertyclasses.html">Types and Property Classes</a></li>
          <li><a href="../docs/python/datastore/gqlreference.html">GQL Reference</a></li>
          <li><a href="../docs/python/datastore/modelclass.html">Model</a></li>
          <li><a href="../docs/python/datastore/expandoclass.html">Expando</a></li>
          <li><a href="../docs/python/datastore/polymodelclass.html">PolyModel</a></li>
          <li><a href="../docs/python/datastore/propertyclass.html">Property</a></li>
          <li><a href="../docs/python/datastore/queryclass.html">Query</a></li>
          <li><a href="../docs/python/datastore/gqlqueryclass.html">GqlQuery</a></li>
          <li><a href="../docs/python/datastore/metadataqueryclass.html">Metadata Query</a></li>
          <li><a href="../docs/python/datastore/keyclass.html">Key</a></li>
          <li><a href="../docs/python/datastore/functions.html">Functions</a></li>
          <li><a href="../docs/python/datastore/exceptions.html">Exceptions</a></li>
        </ul>
      </li>

      </ul>
    </li>
    <li><a href="../docs/python/dataprocessing/index.html">Data Processing</a>
      <ul>
             <li><a href="../docs/python/dataprocessing/overview.html">Overview</a></li>
     <li><a href="../docs/python/dataprocessing/helloworld.html">Hello World</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/dataprocessing/mapreducepipelineclass.html">Mapreduce Pipline</a></li>
         <li><a href="../docs/python/dataprocessing/readers_writers.html">Standard Input Readers and Output Writers</a></li>
       </ul>
     </li>

      </ul>
    </li>
    <li><a href="../docs/python/apis.html">Services</a>
      <ul>
        <li><a href="../docs/python/appidentity/index.html">App Identity</a>
          <ul>
            <li><a href="../docs/python/appidentity/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/appidentity/functions.html">Functions</a></li>
    <li><a href="../docs/python/appidentity/exceptions.html">Exceptions</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../docs/python/blobstore/index.html">Blobstore</a>
          <ul>
            <li><a href="../docs/python/blobstore/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/blobstore/blobinfoclass.html">BlobInfo</a></li>
    <li><a href="../docs/python/blobstore/blobkeyclass.html">BlobKey</a></li>
    <li><a href="../docs/python/blobstore/blobreaderclass.html">BlobReader</a></li>
    <li><a href="../docs/python/blobstore/functions.html">Functions</a></li>
    <li><a href="../docs/python/blobstore/exceptions.html">Exceptions</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../docs/python/capabilities/index.html">Capabilities</a>
          <ul>
            <li><a href="../docs/python/capabilities/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/capabilities/capabilitysetclass.html">CapabilitySet</a></li>
    <li><a href="../docs/python/capabilities/exceptions.html">Exceptions</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../docs/python/conversion/index.html">Conversion</a>
          <ul>
            <li><a href="../docs/python/conversion/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/conversion/conversionclass.html">Conversion Class</a></li>
    <li><a href="../docs/python/conversion/propertyclasses.html">Property Classes</a></li>
    <li><a href="../docs/python/conversion/functions.html">Functions</a></li>
    <li><a href="../docs/python/conversion/exceptions.html">Exceptions</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../docs/python/channel/index.html">Channel</a>
          <ul>
            <li><a href="../docs/python/channel/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/channel/functions.html">Functions</a></li>
    <li><a href="../docs/python/channel/exceptions.html">Exceptions</a></li>
    <li><a href="../docs/python/channel/javascript.html">Client Javascript Reference</a></li>
  </ul>
</li>

          </ul>
        </li>
        <li><a href="../docs/python/images/index.html">Images</a>
          <ul>
                 <li><a href="../docs/python/images/overview.html">Overview</a></li>
     <li><a href="../docs/python/images/installingPIL.html">Installing PIL</a></li>
     <li><a href="../docs/python/images/usingimages.html">Using the Images API</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/images/imageclass.html">Image</a></li>
         <li><a href="../docs/python/images/functions.html">Functions</a></li>
         <li><a href="../docs/python/images/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/mail/index.html">Mail</a>
          <ul>
                 <li><a href="../docs/python/mail/overview.html">Overview</a></li>
     <li><a href="../docs/python/mail/sendingmail.html">Sending Mail</a></li>
     <li><a href="../docs/python/mail/receivingmail.html">Receiving Mail</a></li>
     <li><a href="../docs/python/mail/attachments.html">Attachments</a></li>
     <li><a href="../docs/python/mail/headers.html">Headers</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/mail/emailmessageclass.html">EmailMessage</a></li>
         <li><a href="../docs/python/mail/emailmessagefields.html">Message Fields</a></li>
         <li><a href="../docs/python/mail/functions.html">Functions</a></li>
         <li><a href="../docs/python/mail/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/memcache/index.html">Memcache</a>
          <ul>
                 <li><a href="../docs/python/memcache/overview.html">Overview</a></li>
      <li><a href="../docs/python/memcache/usingmemcache.html">Using Memcache</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/memcache/clientclass.html">Client</a></li>
         <li><a href="../docs/python/memcache/functions.html">Functions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/multitenancy/index.html">Multitenancy</a>
          <ul>
                  <li><a href="../docs/python/multitenancy/overview.html">Overview</a></li>
    <li><a href="../docs/python/multitenancy/multitenancy.html">Multitenancy with Namespaces</a></li>
    <li><a href="../docs/python/multitenancy/namespaces.html">Other Uses for Namespaces</a></li>
    <li>Reference
      <ul>
        <li><a href="../docs/python/multitenancy/functions.html">Functions</a></li>
        <li><a href="../docs/python/multitenancy/exceptions.html">Exceptions</a></li>
      </ul>
    </li>

          </ul>
        </li>
        <li><a href="../docs/python/oauth/index.html">OAuth</a>
          <ul>
                 <li><a href="../docs/python/oauth/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/oauth/functions.html">Functions</a></li>
         <li><a href="../docs/python/oauth/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/prospectivesearch/index.html">Prospective Search</a>
          <ul>
            <li><a href="../docs/python/prospectivesearch/overview.html">Overview</a></li>
<li><span class="tlw-title tlw-expanded">Reference</span>
  <ul>
    <li><a href="../docs/python/prospectivesearch/functions.html">Functions</a></li>
    <li><a href="../docs/python/prospectivesearch/exceptions.html">Exceptions</a></li>
  </ul>
</li> 

          </ul> 
        </li>
         <li><a href="../docs/python/googlestorage/index.html">Google Cloud Storage</a>
          <ul>
            <li><a href="../docs/python/googlestorage/overview.html">Overview</a></li>
<li><a href="../docs/python/googlestorage/functions.html">Functions</a></li>
<li><a href="../docs/python/googlestorage/exceptions.html">Exceptions</a></li>
    </li>


          </ul>
        </li>
        <li><a href="../docs/python/taskqueue/index.html">Task Queues</a>
          <ul>
                 <li><a href="../docs/python/taskqueue/overview.html">Overview</a></li>
     <li><a href="../docs/python/taskqueue/overview-push.html">Using Push Queues</a></li>
     <li><a href="../docs/python/taskqueue/overview-pull.html">Using Pull Queues</a><sup class="new">New!</sup></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/taskqueue/tasks.html">Task Class</a></li>
         <li><a href="../docs/python/taskqueue/taskretryoptions.html">TaskRetryOptions Class</a></li>
         <li><a href="../docs/python/taskqueue/queues.html">Queue Class</a></li>
         <li><a href="../docs/python/taskqueue/rest.html">REST</a>  <span class="exp-feat">(Experimental)</span></li>
         <li><a href="../docs/python/taskqueue/functions.html">Functions</a></li>
         <li><a href="../docs/python/taskqueue/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/urlfetch/index.html">URL Fetch</a>
          <ul>
                 <li><a href="../docs/python/urlfetch/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/urlfetch/fetchfunction.html">The fetch Function</a></li>
         <li><a href="../docs/python/urlfetch/asynchronousrequests.html">Asynchronous Requests</a></li>
         <li><a href="../docs/python/urlfetch/responseobjects.html">Response Objects</a></li>
         <li><a href="../docs/python/urlfetch/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/users/index.html">Users</a>
          <ul>
                 <li><a href="../docs/python/users/overview.html">Overview</a></li>
     <li><a href="../docs/python/users/userobjects.html">User Objects</a></li>
     <li><a href="../docs/python/users/loginurls.html">Login URLs</a></li>
     <li><a href="../docs/python/users/adminusers.html">Admin Users</a></li>

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/users/userclass.html">User</a></li>
         <li><a href="../docs/python/users/functions.html">Functions</a></li>
         <li><a href="../docs/python/users/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/xmpp/index.html">XMPP</a>
          <ul>
                 <li><a href="../docs/python/xmpp/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/xmpp/functions.html">Functions</a></li>
         <li><a href="../docs/python/xmpp/messageclass.html">Message</a></li>
         <li><a href="../docs/python/xmpp/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
      </ul>
    </li>
    <li><a href="../docs/python/config/index.html">Configuration</a>
      <ul>
            <li><a href="../docs/python/config/appconfig.html">App Config</a></li>
    <li><a href="../docs/python/config/backends.html">Backends Config</a></li>
    <li><a href="../docs/python/config/indexconfig.html">Index Config</a></li>
    <li><a href="../docs/python/config/cron.html">Scheduled Tasks</a></li>
    <li><a href="../docs/python/config/queue.html">Task Queue Config</a></li>
    <li><a href="../docs/python/config/dos.html">DoS Protection Config</a></li>

      </ul>
    </li>
    <li><span class="tlw-title"><a href="../docs/python/tools/index.html">Tools</a></span>
      <ul>
            <li><a href="../docs/python/tools/devserver.html">Development Server</a></li>
    <li><a href="../docs/python/tools/uploadinganapp.html">Uploading and Managing an App</a></li>
    <li><a href="../docs/python/tools/uploadingdata.html">Uploading and Downloading Data</a></li>
    <li><span class="tlw-title"><a href="../docs/python/tools/protorpc/index.html">ProtoRPC</a></span>
      <ul>
        <li><a href="../docs/python/tools/protorpc/overview.html">Overview</a></li>
<li><a href="../docs/python/tools/protorpc/definition-functions.html">Definition Module</a></li>
<li>Descriptor Module
  <ul>
        <li><a href="../docs/python/tools/protorpc/descriptor/descriptorlibrary.html">DescriptorLibrary Functions</a></li>
    <li><a href="../docs/python/tools/protorpc/descriptor/functions.html">Functions</a></li>

  </ul>
</li>
<li>Messages Module
  <ul>
        <li><a href="../docs/python/tools/protorpc/messages/enumclass.html">Enum</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/enumfieldclass.html">EnumField</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/fieldclass.html">Field</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/fieldclasses.html">Message Field Classes</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/messageclass.html">Message</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/messagefieldclass.html">MessageField</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/variantclass.html">Variant</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/functions.html">Functions</a></li>
    <li><a href="../docs/python/tools/protorpc/messages/exceptions.html">Exceptions</a></li>
  </ul>
</li>
<li>Remote Service Library
  <ul>
        <li><a href="../docs/python/tools/protorpc/remote/index.html">Overview</a></li>
    <li><a href="../docs/python/tools/protorpc/remote/httprequeststateclass.html">HttpRequestState Class</a></li>
    <li><a href="../docs/python/tools/protorpc/remote/requeststateclass.html">RequestState Class</a></li>
    <li><a href="../docs/python/tools/protorpc/remote/rpcstatusclass.html">RpcStatus Class</a></li>
    <li><a href="../docs/python/tools/protorpc/remote/serviceclass.html">Service Class</a></li>
    <li><a href="../docs/python/tools/protorpc/remote/functions.html">Functions</a></li>
    <li><a href="../docs/python/tools/protorpc/remote/exceptions.html">Exceptions</a></li>

  </ul>
</li>
<li>Transport Library
  <ul>
        <li><a href="../docs/python/tools/protorpc/transport/httptransport.html">HttpTransport Class</a></li>
    <li><a href="../docs/python/tools/protorpc/transport/transport.html">Transport Class</a></li>

  </ul>
</li>
<li>WebApp Service Handlers
  <ul>
        <li><a href="../docs/python/tools/protorpc/webapp/index.html">Overview</a></li>
    <li><a href="../docs/python/tools/protorpc/webapp/functions.html">WebApp Service Handlers</a></li>

  </ul>
</li>

      </ul>
    </li>
    <li><a href="../docs/python/tools/webapp/index.html">webapp Framework</a>
      <ul>
             <li><a href="../docs/python/tools/webapp/overview.html">Overview</a></li>
     <li><a href="../docs/python/tools/webapp/running.html">Running the Application</a></li>
     <li><a href="../docs/python/tools/webapp/requesthandlers.html">Request Handlers</a></li>
     <li><a href="../docs/python/tools/webapp/requestdata.html">Request Data</a></li>
     <li><a href="../docs/python/tools/webapp/buildingtheresponse.html">Building the Response</a></li>
     <li><a href="../docs/python/tools/webapp/redirects.html">Redirects, Headers and Status Codes</a></li>
     <li><a href="../docs/python/tools/webapp/blobstorehandlers.html">Blobstore Handlers</a></li>

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/tools/webapp/requestclass.html">Request</a></li>
         <li><a href="../docs/python/tools/webapp/responseclass.html">Response</a></li>
         <li><a href="../docs/python/tools/webapp/requesthandlerclass.html">RequestHandler</a></li>
         <li><a href="../docs/python/tools/webapp/wsgiapplicationclass.html">WSGIApplication</a></li>
         <li><a href="../docs/python/tools/webapp/utilmodule.html">Utility Functions</a></li>
         
       </ul>
     </li>

      </ul>
    </li>
    <li><a href="../docs/python/tools/localunittesting.html">Local Unit Testing</a></li>
    <li><a href="../docs/python/tools/appstats.html">Appstats</a></li>
    <li><a href="../docs/python/tools/libraries.html">Included Libraries </a>(Python 2.5)</li>
    <li><a href="../docs/python/tools/libraries27.html">Included Libraries</a>(Python 2.7)</li>
    <li><a href="../docs/python/tools/appengineconfig.html">Python Module Configuration</a></li>

      </ul>
    </li>
    <li><a href="../docs/python/howto/index.html">How-To</a>
      <ul>
              <li><a href="../docs/python/howto/usinggdataservices.html">Google Data Services</a></li>
      <li><a href="../docs/python/howto/maintenance.html">Handling Scheduled Maintenance Periods</a></li>

      </ul>
    </li>

    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Go</h2> <span class="exp-feat">Experimental!</span>
    <ul>
          <li><a href="../docs/go/overview.html">Overview</a></li>
    <li><a href="../docs/go/runtime.html">Runtime Environment</a>
      <ul>
        <li><a href="../docs/go/reference.html">Reference</a></li>
      </ul>
    </li>
    <li><a href="../docs/go/backends/index.html">Backends</a>
      <ul>
        <li><a href="../docs/go/backends/overview.html">Overview</a></li>
<li><a href="../docs/go/backends/runtime.html">Runtime package</a></li>

      </ul>
    </li>
    <li><a href="../docs/go/datastore/index.html">Storing Data</a>
      <ul>
             <li><a href="../docs/go/datastore/overview.html">Overview</a></li>
     <li><a href="../docs/go/datastore/transactions.html">Transactions</a></li>
     <li><a href="../docs/go/datastore/reference.html">Reference</a></li>

      </ul>
    </li>
    <li><a href="../docs/go/apis.html">Services</a>
      <ul>
        <li><a href="../docs/go/blobstore/index.html">Blobstore</a>
          <ul>
            <li><a href="../docs/go/blobstore/overview.html">Overview</a></li>
<li><a href="../docs/go/blobstore/reference.html">Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/capabilities/index.html">Capabilities</a>
          <ul>
            <li><a href="../docs/go/capabilities/overview.html">Overview</a></li>
<li><a href="../docs/go/capabilities/reference.html">Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/channel/index.html">Channel</a>
          <ul>
            <li><a href="../docs/go/channel/overview.html">Overview</a></li>
<li><a href="../docs/go/channel/reference.html">Reference</a></li>
<li><a href="../docs/go/channel/javascript.html">Client Javascript Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/mail/index.html">Mail</a>
          <ul>
                 <li><a href="../docs/go/mail/overview.html">Overview</a></li>
     <li><a href="../docs/go/mail/reference.html">Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/memcache/index.html">Memcache</a>
          <ul>
                 <li><a href="../docs/go/memcache/overview.html">Overview</a></li>
     <li><a href="../docs/go/memcache/reference.html">Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/taskqueue/index.html">Task Queues</a>
          <ul>
                 <li><a href="../docs/go/taskqueue/overview.html">Overview</a></li>
     <li><a href="../docs/go/taskqueue/reference.html">Reference</a></li>
     <li><a href="../docs/go/taskqueue/delay.html">Delay package</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/urlfetch/index.html">URL Fetch</a>
          <ul>
                 <li><a href="../docs/go/urlfetch/overview.html">Overview</a></li>
     <li><a href="../docs/go/urlfetch/reference.html">Reference</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/users/index.html">Users</a>
          <ul>
                 <li><a href="../docs/go/users/overview.html">Overview</a></li>
     <li><a href="../docs/go/users/reference.html">Reference</a></li>

          </ul>
        </li>
      </ul>
        <li><a href="../docs/go/config/index.html">Configuration</a>
          <ul>
                <li><a href="../docs/go/config/appconfig.html">App Config</a></li>
    <li><a href="../docs/go/config/backends.html">Backends Config</a></li>
    <li><a href="../docs/go/config/indexconfig.html">Index Config</a></li>
    <li><a href="../docs/go/config/cron.html">Scheduled Tasks</a></li>
    <li><a href="../docs/go/config/queue.html">Task Queue Config</a></li>
    <li><a href="../docs/go/config/dos.html">DoS Protection Config</a></li>

          </ul>
        </li>
        <li><a href="../docs/go/tools/index.html">Tools</a>
          <ul>
                <li><a href="../docs/go/tools/devserver.html">Development Server</a></li>
    <li><a href="../docs/go/tools/uploadinganapp.html">Uploading and Managing an App</a></li>

          </ul>
        </li>
    </li>

    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Managing Your App</h2>
    <ul>
      <li><a href="../docs/adminconsole/index.html">Admin Console</a>
        <ul>
          <li><a href="../docs/adminconsole/instances.html">Instances</a></li>
<li><a href="../docs/adminconsole/roles.html">Roles</a></li>
<li><a href="../docs/adminconsole/applicationsettings.html">Application Settings</a></li>
<li><a href="../docs/adminconsole/datastoreadmin.html">Datastore</a></li>
<li><a href="../docs/adminconsole/performancesettings.html">Performance Settings</a></li>

        </ul>
      </li>
      <li><a href="../docs/quotas.html">Quotas</a></li>
      <li><a href="../docs/billing.html">Billing</a></li>
      <li><a href="../docs/premier/index.html">Premier Accounts</a></li>
      <li><a href="../docs/domain.html">Using a Custom Domain</a></li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Resources</h2>
    <ul>
      <li><a href="../kb/index.html">FAQ</a></li>
      <li><a href="index.html">Articles</a></li>
      <li><a href="../docs/videoresources.html">Video Resources</a><sup class="new">New!</sup></li>
      <li><a href="http://code.google.com/p/googleappengine/">SDK Code</a></li>
      <li><a href="http://code.google.com/p/datanucleus-appengine/">JDO/JPA Code</a></li>
      <li><a href="http://code.google.com/p/google-app-engine-samples/">Sample Apps Code</a></li>
      <li>Launcher Code
        <ul>
          <li><a href="http://code.google.com/p/google-appengine-mac-launcher/">Mac</a></li>
          <li><a href="http://code.google.com/p/google-appengine-wx-launcher/">Windows/wx</a></li>
        </ul>
      </li>
      <li><a href="../community.html">Discussion Groups</a></li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><a href="../docs/roadmap.html">Product Roadmap</a></li>
  <li><a href="http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes">Release Notes: Python</a></li>
  <li><a href="http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes">Release Notes: Java</a></li>
  <li><a href="../docs/revision_history.html">Revision History</a></li>
</ul>

        <a class="hidden" href="#gc-topnav-anchor">More Google App Engine resource links</a>
      </div>
      
      <a name="gc-pagecontent-anchor"></a>   
      <div class="g-unit" id="gc-pagecontent">
        <script type="text/javascript">CODESITE_docEarlyProcessing();</script>
        <h1 class="page_title">How Index Building Works</h1>


<i>Ryan Barrett</i><br>
<i>November 24, 2008</i>

<div id="jd-content">
<div class="jd-descr">

<p class="note" align="center">This is one of a <a href="datastore/overview.html">series</a> of in-depth articles discussing App Engine's datastore. To see the other articles in the series, see <a href="#related">Related links</a>.</p>

<p>Every App Engine
<a href="../docs/python/datastore/queries.html#Overview">datastore query</a>
is served by an
<a href="../docs/python/datastore/queries.html#Introduction_to_Indexes">index</a>.
The built-in indexes can handle simple queries, including all entities of a
given kind, filters and sort orders on a single property, and equality filters
on any number of properties. More complex queries, on the other hand, need
custom
<a href="../docs/python/datastore/queries.html#Introduction_to_Indexes">developer-defined indexes</a>.</p>

<p>Internally, we call these <i>composite</i> indexes, to distinguish them from
the built-in kind and single property indexes. We use the word composite because
their index data is composed of multiple values per index row.</p>

<p>When you add a new composite index to your app, it must be populated with
existing data from your datastore before it can serve queries. Similarly, when
you delete an index from your app, its index rows must be removed. App Engine
runs an
<i>index building workflow</i> behind the scenes that populates and deletes
indexes.</p>

<p>This article describes
<a href="#Index Layout">how indexes are laid out</a>,
<a href="#Index Building and Deleting">how the index building workflow works</a>, and
<a href="#FAQs">common questions</a> about index building.</p>

<a name="Index Layout"></a>
<h2>Index Layout</h2>

<p>App Engine stores index data in four
<a href="http://labs.google.com/papers/bigtable.html">Bigtables</a>, shared
across all apps. The first three tables store the built-in kind, single property
ascending, and single property descending indexes. The last table stores all of
the composite indexes.</p>

<p>The index data for a given index row is stored in the Bigtable row name.
This includes app id, kind, key, and extra data that varies by index. The
built-in single property indexes' extra data includes the property name and
value. The built-in kind index has no extra data.</p>

<p>Composite indexes' extra data includes the values for each property in the
index definition, along with the ancestor, if specified. Property names are
omitted to save space, since the index definitions themselves include the
property names. However, composite index rows do include an index id, which
distinguishes between index rows from different composite indexes that happen to
have the same property values in the same order.</p>

<p>For more on index layout, see the
<a href="http://code.google.com/events/io/">Google I/O</a> talk
<a href="http://sites.google.com/site/io/under-the-covers-of-the-google-app-engine-datastore">Under
 the Covers of the Google App Engine Datastore</a>.</p>


<a name="Index Building and Deleting"></a>
<h2>Index Building and Deleting</h2>

<p>When you
<a href="../docs/python/datastore/queries.html#Introduction_to_Indexes">define a new index</a> and ask us to build it, we follow these steps:</p>


<ol>
<li>Add the index definition metadata to the app.</li>
<li>Mark the index metadata <i>Building</i>. This tells the datastore to update
  it on all writes, but to not use it for queries (yet).</li>
<li>Map over the existing entities and populate them in the index.</li>
<li>Mark the index <i>Serving</i>. This tells the datastore that the index is
  available for querying.</li>
</ol>

<p>Deleting an index is almost the same process:</p>

<ol>
<li>Mark the index metadata <i>Deleting</i>. This tells the datastore to ignore
  it on both writes and queries.</li>
<li>Remove the index's rows.</li>
<li>Delete the index's metadata.</li>
</ol>

<p>When an entity is created or deleted, all of the index rows for that entity
must be updated. However, when an existing entity is updated, the datastore
determines the <i>delta</i>, i.e. the properties that were changed, and only
updates the index rows that include those properties.</p>

<p>Furthermore, the datastore handles composite indexes automatically. When an
entity is put or deleted, the datastore determines the composite index rows
that need updating, as above, and updates them.</p>

<p>Since the datastore handles index updates efficiently and automatically,
the index building workflow simply reuses the datastore's code. To build or
delete an index, the workflow maps over all of the app's entities, one at a
time. For each entity, the workflow uses the datastore to read it and write it
back, unchanged, in a transaction. The datastore detects any <i>Building</i>
or
<i>Deleting</i> indexes and updates the relevant index rows accordingly.</p>


<a name="Doing Work in Parallel"></a>
<h2>Doing Work in Parallel</h2>

<p>The index building workflow has workers that build and delete indexes
incrementally, in parallel. This allows it to build and delete indexes for
different apps at the same time. It also allows for parallelizing the work of
building or deleting a single app's indexes. Finally, it allows for
checkpointing and resuming work if a worker dies for any reason.</p>

<p>The workflow maintains a central list of all apps with indexes to be built or
deleted. Each app's data is split into <i>shards</i>. When a worker is idle, it
consults this list, takes a <i>lease</i> on a shard of data, and maps over the
entities in that shard, populating index rows as
<a href="#Index Building and Deleting">described above</a>. If the lease
expires before the worker is done, it gives up, discards the partially
completed work, and the shard becomes available for other workers to retry.
</p>

<p>We've implemented a few different mechanisms for sharding data: first by
Bigtable tablet, then later within tablets. Both of these methods are
explained below.</p>

<a name="Splitting by Tablet"></a>
<h3>Splitting by Tablet</h3>

<p>Surprisingly, splitting an app's entities into shards isn't easy. Ideally,
the workflow would just ask Bigtable for every Nth row, starting from the app's
first entity and ending at the last. Those would be the "split" points that
demarcate each shard.</p>

<p>However, Bigtable intentionally doesn't provide such an offset operation.
So, we approximated. Bigtable splits data into contiguous ranges of rows
called <i>tablets</i>, which may be split, merged, and moved between tablet
servers at runtime. Bigtable does know each tablet's start and end rows, so we
started by inserting a shard for each tablet.</p>

<p>Unfortunately, tablets are limited only by total data size, so the number of
rows (ie entities) can vary widely across tablets. The time required to populate
index data varied much more by the number of properties in an entity than the
size of that entity, so different tablets shards took workers drastically
different amounts of time. Workers often exceeded their leases on tablets with
a large number of rows, which kept indexes building or deleting for long periods
of time.</p>

<a name="Splitting Within Tablets"></a>
<h3>Splitting Within Tablets</h3>

<p>To address this, we recently added support for splitting large shards. When a
worker notices that its lease on a shard is about to expire, it gives up working
and instead splits the shard into <code>n</code> smaller shards. Each smaller
shard includes the original shard's row range and two <i>sharding
parameters</i>: <code>n</code>, which is the same for all pieces,
and <code>k</code>, which ranges from <code>0</code> to <code>n-1</code>.</p>

<p>When a worker takes on a shard that's been split with sharding parameters, it
maps over all of the entities in the shard's row range, as usual. As it
encounters each entity, it hashes the entity's key, and only populates indexes
for that entity if the hash equals <code>k modulo n</code>.</p>

<p>An alternative design would be to populate every <code>k</code>th entity.
This would be simpler, but might miss entities, since the app is serving during
this process and could insert or delete entities.</p>

<p>It's worth emphasizing that a shard's row range doesn't change when it's
split. Workers still scan over the entire row range. This scan is relatively
cheap compared to the reads and writes required to update the indexes, though.
Disk bandwidth is much cheaper than disk seeks, so Bigtable scans are much
cheaper than random access reads and writes to individual rows!</p>


<a name="FAQs"></a>
<h2>FAQs</h2>

<p>Here are some common questions about how we build and delete indexes
internally. (If you're curious about how to specify indexes for your app, see
<a href="../docs/python/datastore/queries.html#Introduction_to_Indexes">our documentation</a>.)</p>

<p>
<b>Q:</b> Why do my indexes stay <i>Building</i> or <i>Deleting</i>
  for long periods of time? <br />
<b>A:</b> In the past, this often happened because worker
  <a href="#Doing Work in Parallel">shards</a> were too large to be completed
  within the lease period. To address this, we first increased the lease
  period. Now, we <a href="#Splitting Within Tablets">split individual tablets
  into shards</a>. Index building can still take some time, but it's
  considerably faster than it was before.
</p>

<p>
<b>Q:</b> Why are my indexes marked <i>Error</i>? <br />
<b>A:</b> They're probably
<a href="../docs/python/datastore/queries.html#Big_Entities_and_Exploding_Indexes">exploding indexes</a>.
Occasionally, though, we have to move indexes into <i>Error</i> manually. We
usually contact you directly when we do this.
</p>

<p>
<b>Q:</b> Why map over the app's whole datastore? Can't you use the
  built-in kind index to map over just the entities of the index's kind, and
  skip the other kinds? <br />
<b>A:</b> The transaction isolation level of individual entity
  reads and writes is <code>READ COMMITTED</code>, but indexes don't have the
  same guarantee. Given that, the kind index might miss some entities. See
  <a href="transaction_isolation.html">Transaction
  Isolation in App Engine</a> for more details.
</p>

<p>
<b>Q:</b> When an index is deleted, can't you just delete its index rows
  directly? You could do a Bigtable prefix scan with the app id and the index
  id, right? Why map over the entities themselves? <br />
<b>A:</b> We wish it were that easy! The entities include
  metadata about the composite indexes that apply to them, so we need to update
  that metadata as well as deleting the index rows.
</p>

<h2 id="related">Related links</h2>

<ul>
  <li><a href="datastore/overview.html">Series Overview</a></li>
  <li><a href="life_of_write.html">Life of a Datastore Write</a></li>
  <li><a href="transaction_isolation.html">Transaction Isolation in App Engine</a></li>
  <li><a href="index_building.html">How Index Building Works</a></li>
  <li><a href="storage_breakdown.html">How Entities and Indexes are Stored</a></li>
  <li><a href="modeling.html">Modeling Entity Relationships</a></li>
  <li><a href="update_schema.html">Updating Your Model's Schema</a></li>
  <li><a href="handling_datastore_errors.html">Handling Datastore Errors</a></li>
  <li><a href="indexselection.html">Index Selection and Advanced Search</a></li>
</ul>


</div>
</div>


   
      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->


<div id="gc-footer" dir="ltr">
  <div class="text">
    
      <div class="notice"><div id="notice" style="text-align: center; border: 1em 0em 1em 0em">
  Except as otherwise <a
  href="http://code.google.com/policies.html#restrictions">noted</a>,
  the content of this page is licensed under the <a rel="license"
  href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
  Attribution 3.0 License</a>, and code samples are licensed under the
  <a rel="license" href="http://www.apache.org/licenses/LICENSE-2.0">Apache
  2.0 License</a>.
<!-- <rdf:RDF xmlns="http://web.resource.org/cc/" 
              xmlns:dc="http://purl.org/dc/elements/1.1/"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <Work rdf:about="">
    <license rdf:resource="http://creativecommons.org/licenses/by/3.0/" />
  </Work>
  <License rdf:about="http://creativecommons.org/licenses/by/3.0/">
    <permits rdf:resource="http://web.resource.org/cc/Reproduction"/>
    <permits rdf:resource="http://web.resource.org/cc/Distribution"/>
    <requires rdf:resource="http://web.resource.org/cc/Notice"/>
    <requires rdf:resource="http://web.resource.org/cc/Attribution"/>
    <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/>
  </License>
</rdf:RDF> -->
</div>
Java is a registered trademark of Oracle Corporation and/or its affiliates</div>
    
    2011 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://code.google.com/terms.html">Site Terms of Service</a> -
    <a href="http://code.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://code.google.com/more">Site Directory</a>
    <br> <br>
    Google Code offered in:
    <a href="http://code.google.com/intl/en">English</a> -
    <a href="http://code.google.com/intl/es">Espaol</a> -
    <a href="http://code.google.com/intl/ja"></a> -
    <a href="http://code.google.com/intl/ko"></a> -
    <a href="http://code.google.com/intl/pt-BR">Portugus</a> -
    <a href="http://code.google.com/intl/ru">P</a> -
    <a href="http://code.google.com/intl/zh-CN">()</a> -
    <a href="http://code.google.com/intl/zh-TW">()</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-container -->

<script type="text/javascript">CODESITE_CSITimer['load'].tick('ats');</script>
<script src="../../js/codesite_tail.pack.04102009.js" type="text/javascript"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>





  </body>
</html>


